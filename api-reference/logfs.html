
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Log File System &#8212; Pazzk  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'api-reference/logfs';</script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script src="../_static/mermaid-init.js?v=b11fa8ae"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Metering" href="metering.html" />
    <link rel="prev" title="IEC 61851" href="iec61851.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/pazzk-logo.png" class="logo__image only-light" alt="Pazzk  documentation - Home"/>
    <script>document.write(`<img src="../_static/pazzk-logo.png" class="logo__image only-dark" alt="Pazzk  documentation - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Architecture</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../architecture/charger.html">Charger</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture/network.html">Network</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Command Line Interface</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../cli/cli_commands.html">CLI</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Communication / OCPP</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../comms/ocpp_auth.html">OCPP Auth</a></li>
<li class="toctree-l1"><a class="reference internal" href="../comms/ocpp_boot.html">OCPP Boot</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Electrical Interfaces</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../electrical/control_pilot.html">Control Pilot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../electrical/flash.html">Flash</a></li>
<li class="toctree-l1"><a class="reference internal" href="../electrical/input.html">Input Section</a></li>
<li class="toctree-l1"><a class="reference internal" href="../electrical/power.html">Power Management</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Firmware Reference</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../firmware/configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../firmware/device_serial_number.html">Device Serial Number</a></li>
<li class="toctree-l1"><a class="reference internal" href="../firmware/metrics.html">metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../firmware/operating_mode.html">Operating Modes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../firmware/uid_storage.html">UID Storage</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="config.html">Confing</a></li>
<li class="toctree-l1"><a class="reference internal" href="downloader.html">Downloader</a></li>
<li class="toctree-l1"><a class="reference internal" href="exio.html">EXIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="fs.html">File System</a></li>
<li class="toctree-l1"><a class="reference internal" href="iec61851.html">IEC 61851</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Log File System</a></li>
<li class="toctree-l1"><a class="reference internal" href="metering.html">Metering</a></li>
<li class="toctree-l1"><a class="reference internal" href="periph.html">Peripheral</a></li>
<li class="toctree-l1"><a class="reference internal" href="pilot.html">Pilot</a></li>
<li class="toctree-l1"><a class="reference internal" href="pinmap.html">Pinmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="relay.html">Relay</a></li>
<li class="toctree-l1"><a class="reference internal" href="safety.html">Safety</a></li>
<li class="toctree-l1"><a class="reference internal" href="secret.html">Secret</a></li>
<li class="toctree-l1"><a class="reference internal" href="uid.html">UID</a></li>
<li class="toctree-l1"><a class="reference internal" href="updater.html">Updater</a></li>
<li class="toctree-l1"><a class="reference internal" href="uptime.html">Uptime</a></li>
<li class="toctree-l1"><a class="reference internal" href="usrinp.html">User Input</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/api-reference/logfs.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Log File System</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#_CPPv412logfs_createP2fsPKcK6size_tK6size_t6size_t"><code class="docutils literal notranslate"><span class="pre">logfs_create()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#_CPPv413logfs_destroyP5logfs"><code class="docutils literal notranslate"><span class="pre">logfs_destroy()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#_CPPv411logfs_writeP5logfsK6time_tPKvK6size_t"><code class="docutils literal notranslate"><span class="pre">logfs_write()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#_CPPv410logfs_readP5logfsK6time_tK6size_tPvK6size_t"><code class="docutils literal notranslate"><span class="pre">logfs_read()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#_CPPv410logfs_sizeP5logfsK6time_t"><code class="docutils literal notranslate"><span class="pre">logfs_size()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#_CPPv411logfs_countP5logfs"><code class="docutils literal notranslate"><span class="pre">logfs_count()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#_CPPv49logfs_dirP5logfs14logfs_dir_cb_tPvK6size_t"><code class="docutils literal notranslate"><span class="pre">logfs_dir()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#_CPPv412logfs_deleteP5logfsK6time_t"><code class="docutils literal notranslate"><span class="pre">logfs_delete()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#_CPPv411logfs_clearP5logfs"><code class="docutils literal notranslate"><span class="pre">logfs_clear()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#_CPPv411logfs_flushP5logfs"><code class="docutils literal notranslate"><span class="pre">logfs_flush()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#_CPPv414logfs_dir_cb_t"><code class="docutils literal notranslate"><span class="pre">logfs_dir_cb_t</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#c.LOGFS_MIN_CACHE_SIZE"><code class="docutils literal notranslate"><span class="pre">LOGFS_MIN_CACHE_SIZE</span></code></a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="log-file-system">
<h1>Log File System<a class="headerlink" href="#log-file-system" title="Link to this heading">#</a></h1>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv412logfs_createP2fsPKcK6size_tK6size_t6size_t">
<span id="_CPPv312logfs_createP2fsPKcK6size_tK6size_t6size_t"></span><span id="_CPPv212logfs_createP2fsPKcK6size_tK6size_t6size_t"></span><span id="logfs_create__fsP.cCP.sC.sC.s"></span><span class="target" id="logfs_8h_1a4339ee40781447157d736361328e89e5"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">logfs</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">logfs_create</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv412logfs_createP2fsPKcK6size_tK6size_t6size_t" title="logfs_create::fs"><span class="n"><span class="pre">fs</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">fs</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">base_path</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">max_size</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">max_logs</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">cache_size</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv412logfs_createP2fsPKcK6size_tK6size_t6size_t" title="Link to this definition">#</a><br /></dt>
<dd><p>Creates a log filesystem structure. </p>
<p>This function initializes and returns a pointer to a log filesystem structure. The log filesystem is used to manage log files with a specified maximum size and maximum number of logs.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Logs are sorted in ascending order by filename.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the total size of the logs exceeds max_size, logs are deleted in sorted order until the total size is less than max_size. For example, if there are files “1” and “2”, the file “1” will be deleted first.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the number of stored logs exceeds max_logs, logs are deleted in sorted order until the the number of logs is less than max_logs.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If max_size or max_logs is 0, it is considered unlimited.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fs</strong> – <strong>[in]</strong> Pointer to the underlying filesystem structure. </p></li>
<li><p><strong>base_path</strong> – <strong>[in]</strong> The base path where log files will be stored. </p></li>
<li><p><strong>max_size</strong> – <strong>[in]</strong> The maximum size (in bytes) for the log filesystem. </p></li>
<li><p><strong>max_logs</strong> – <strong>[in]</strong> The maximum number of log files to be maintained. </p></li>
<li><p><strong>cache_size</strong> – <strong>[in]</strong> The size of the cache (in bytes) for buffering log data.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Pointer to the created log filesystem structure. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv413logfs_destroyP5logfs">
<span id="_CPPv313logfs_destroyP5logfs"></span><span id="_CPPv213logfs_destroyP5logfs"></span><span id="logfs_destroy__logfsP"></span><span class="target" id="logfs_8h_1a0fd7e154876b9ba97cc6ddbfd2aa2d78"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">logfs_destroy</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">logfs</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">self</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv413logfs_destroyP5logfs" title="Link to this definition">#</a><br /></dt>
<dd><p>Destroys the log filesystem structure. </p>
<p>This function releases all resources associated with the log filesystem structure.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>self</strong> – <strong>[in]</strong> Pointer to the log filesystem structure to be destroyed. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv411logfs_writeP5logfsK6time_tPKvK6size_t">
<span id="_CPPv311logfs_writeP5logfsK6time_tPKvK6size_t"></span><span id="_CPPv211logfs_writeP5logfsK6time_tPKvK6size_t"></span><span id="logfs_write__logfsP.time_tC.voidCP.sC"></span><span class="target" id="logfs_8h_1a3515f0e1d5995449ce9300c3dab3c2e4"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">logfs_write</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">logfs</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">self</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">time_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">timestamp</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">log</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">logsize</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv411logfs_writeP5logfsK6time_tPKvK6size_t" title="Link to this definition">#</a><br /></dt>
<dd><p>Writes data to a log file. </p>
<p>This function writes the specified data to the given log file within the log filesystem.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the log file does not exist, it will be created.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the log file exists, the data will be appended to the end of the file.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>self</strong> – <strong>[in]</strong> Pointer to the log filesystem structure. </p></li>
<li><p><strong>timestamp</strong> – <strong>[in]</strong> The timestamp used as the log file name. </p></li>
<li><p><strong>log</strong> – <strong>[in]</strong> Pointer to the data to be written. </p></li>
<li><p><strong>logsize</strong> – <strong>[in]</strong> The size of the data to be written in bytes.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A positive value indicating the number of bytes actually written on success, or a negative error code on failure. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv410logfs_readP5logfsK6time_tK6size_tPvK6size_t">
<span id="_CPPv310logfs_readP5logfsK6time_tK6size_tPvK6size_t"></span><span id="_CPPv210logfs_readP5logfsK6time_tK6size_tPvK6size_t"></span><span id="logfs_read__logfsP.time_tC.sC.voidP.sC"></span><span class="target" id="logfs_8h_1a72533efa08437fb1862fe40fba8c003f"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">logfs_read</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">logfs</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">self</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">time_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">timestamp</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">offset</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">buf</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">bufsize</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv410logfs_readP5logfsK6time_tK6size_tPvK6size_t" title="Link to this definition">#</a><br /></dt>
<dd><p>Reads data from a log file. </p>
<p>This function reads data from the specified log file within the log filesystem.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>self</strong> – <strong>[in]</strong> Pointer to the log filesystem structure. </p></li>
<li><p><strong>timestamp</strong> – <strong>[in]</strong> The timestamp used as the log file name. </p></li>
<li><p><strong>offset</strong> – <strong>[in]</strong> The offset within the file to start reading from. </p></li>
<li><p><strong>buf</strong> – <strong>[out]</strong> Pointer to the buffer where the read data will be stored. </p></li>
<li><p><strong>bufsize</strong> – <strong>[in]</strong> The size of the buffer in bytes.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The number of bytes read on success, or a negative error code on failure. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv410logfs_sizeP5logfsK6time_t">
<span id="_CPPv310logfs_sizeP5logfsK6time_t"></span><span id="_CPPv210logfs_sizeP5logfsK6time_t"></span><span id="logfs_size__logfsP.time_tC"></span><span class="target" id="logfs_8h_1a4cf9e91f51147dfbccf94846c6db5a43"></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">logfs_size</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">logfs</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">self</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">time_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">timestamp</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv410logfs_sizeP5logfsK6time_t" title="Link to this definition">#</a><br /></dt>
<dd><p>Gets the size of a log file or the total size of all log files. </p>
<p>This function returns the size of the specified log file within the log filesystem.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>self</strong> – <strong>[in]</strong> Pointer to the log filesystem structure. </p></li>
<li><p><strong>timestamp</strong> – <strong>[in]</strong> The timestamp used as the log file name. If 0, the total size of all log files is returned.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The size of the specified log file in bytes, or the total size of all log files if timestamp is 0. If the return value is 0, it may indicate an error or that the file does not exist. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv411logfs_countP5logfs">
<span id="_CPPv311logfs_countP5logfs"></span><span id="_CPPv211logfs_countP5logfs"></span><span id="logfs_count__logfsP"></span><span class="target" id="logfs_8h_1aadac289db0a1f1420d67d7987183fe52"></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">logfs_count</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">logfs</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">self</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv411logfs_countP5logfs" title="Link to this definition">#</a><br /></dt>
<dd><p>Get the count of log entries in the log file system. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>self</strong> – <strong>[in]</strong> Pointer to the log file system instance.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The number of log entries. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv49logfs_dirP5logfs14logfs_dir_cb_tPvK6size_t">
<span id="_CPPv39logfs_dirP5logfs14logfs_dir_cb_tPvK6size_t"></span><span id="_CPPv29logfs_dirP5logfs14logfs_dir_cb_tPvK6size_t"></span><span id="logfs_dir__logfsP.logfs_dir_cb_t.voidP.sC"></span><span class="target" id="logfs_8h_1afe0985ed52f13bd11828d71db8383848"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">logfs_dir</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">logfs</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">self</span></span>, <a class="reference internal" href="#_CPPv414logfs_dir_cb_t" title="logfs_dir_cb_t"><span class="n"><span class="pre">logfs_dir_cb_t</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">cb</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">cb_ctx</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">max_files</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv49logfs_dirP5logfs14logfs_dir_cb_tPvK6size_t" title="Link to this definition">#</a><br /></dt>
<dd><p>Lists log files in the log filesystem up to a specified maximum number. </p>
<p>This function iterates over log files in the log filesystem and calls the provided callback function for each file, up to the specified maximum number of files.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If max_files is 0, all log files will be listed.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>self</strong> – <strong>[in]</strong> Pointer to the log filesystem structure. </p></li>
<li><p><strong>cb</strong> – <strong>[in]</strong> Callback function to be called for each log file. </p></li>
<li><p><strong>cb_ctx</strong> – <strong>[in]</strong> User-defined context to be passed to the callback function. </p></li>
<li><p><strong>max_files</strong> – <strong>[in]</strong> The maximum number of log files to list. If 0, all log files will be listed.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>0 on success, or a negative error code on failure. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv412logfs_deleteP5logfsK6time_t">
<span id="_CPPv312logfs_deleteP5logfsK6time_t"></span><span id="_CPPv212logfs_deleteP5logfsK6time_t"></span><span id="logfs_delete__logfsP.time_tC"></span><span class="target" id="logfs_8h_1ad83e064d0eb83fadd16826e05ca983e6"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">logfs_delete</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">logfs</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">self</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">time_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">timestamp</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv412logfs_deleteP5logfsK6time_t" title="Link to this definition">#</a><br /></dt>
<dd><p>Deletes a log file. </p>
<p>This function deletes the specified log file from the log filesystem.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>self</strong> – <strong>[in]</strong> Pointer to the log filesystem structure. </p></li>
<li><p><strong>timestamp</strong> – <strong>[in]</strong> The timestamp used as the log file name.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>0 on success, or a negative error code on failure. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv411logfs_clearP5logfs">
<span id="_CPPv311logfs_clearP5logfs"></span><span id="_CPPv211logfs_clearP5logfs"></span><span id="logfs_clear__logfsP"></span><span class="target" id="logfs_8h_1ac9be19c5465671a5ace0216b0ad1446d"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">logfs_clear</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">logfs</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">self</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv411logfs_clearP5logfs" title="Link to this definition">#</a><br /></dt>
<dd><p>Clears all log files. </p>
<p>This function deletes all log files from the log filesystem.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>self</strong> – <strong>[in]</strong> Pointer to the log filesystem structure.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>0 on success, or a negative error code on failure. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv411logfs_flushP5logfs">
<span id="_CPPv311logfs_flushP5logfs"></span><span id="_CPPv211logfs_flushP5logfs"></span><span id="logfs_flush__logfsP"></span><span class="target" id="logfs_8h_1a9ac7ae092b67531bb01f861e5b50178b"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">logfs_flush</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">logfs</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">self</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv411logfs_flushP5logfs" title="Link to this definition">#</a><br /></dt>
<dd><p>Flushes the log filesystem. </p>
<p>This function flushes any buffered data to the log files within the log filesystem. It ensures that all pending writes are completed and the data is written to the disk.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>self</strong> – <strong>[in]</strong> Pointer to the log filesystem structure.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>0 on success, or a negative error code on failure. </p>
</dd>
</dl>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-typedefs">Typedefs</p>
<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv414logfs_dir_cb_t">
<span id="_CPPv314logfs_dir_cb_t"></span><span id="_CPPv214logfs_dir_cb_t"></span><span id="logfs_dir_cb_t"></span><span class="target" id="logfs_8h_1ae37baa0d0b9ef9feec416e7af818e9b3"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">logfs_dir_cb_t</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">logfs</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">fs</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">time_t</span></span><span class="w"> </span><span class="n"><span class="pre">timestamp</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">ctx</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv414logfs_dir_cb_t" title="Link to this definition">#</a><br /></dt>
<dd><p>Callback function type for iterating over log files. </p>
<p>This callback function is called for each log file in the log filesystem when using the logfs_dir function.</p>
<dl class="field-list simple">
<dt class="field-odd">Param fs<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>[in]</strong> Pointer to the log filesystem structure. </p>
</dd>
<dt class="field-even">Param timestamp<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>[in]</strong> The timestamp used as the log file name.</p>
</dd>
<dt class="field-odd">Param ctx<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>[in]</strong> User-defined context passed to the callback function. </p>
</dd>
</dl>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-defines">Defines</p>
<dl class="cpp macro">
<dt class="sig sig-object cpp" id="c.LOGFS_MIN_CACHE_SIZE">
<span class="target" id="logfs_8h_1aec5232d2f6f63067e8d1897f817622e8"></span><span class="sig-name descname"><span class="n"><span class="pre">LOGFS_MIN_CACHE_SIZE</span></span></span> <span class="pre">4096</span><a class="headerlink" href="#c.LOGFS_MIN_CACHE_SIZE" title="Link to this definition">#</a><br /></dt>
<dd></dd></dl>

</div>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="iec61851.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">IEC 61851</p>
      </div>
    </a>
    <a class="right-next"
       href="metering.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Metering</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#_CPPv412logfs_createP2fsPKcK6size_tK6size_t6size_t"><code class="docutils literal notranslate"><span class="pre">logfs_create()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#_CPPv413logfs_destroyP5logfs"><code class="docutils literal notranslate"><span class="pre">logfs_destroy()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#_CPPv411logfs_writeP5logfsK6time_tPKvK6size_t"><code class="docutils literal notranslate"><span class="pre">logfs_write()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#_CPPv410logfs_readP5logfsK6time_tK6size_tPvK6size_t"><code class="docutils literal notranslate"><span class="pre">logfs_read()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#_CPPv410logfs_sizeP5logfsK6time_t"><code class="docutils literal notranslate"><span class="pre">logfs_size()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#_CPPv411logfs_countP5logfs"><code class="docutils literal notranslate"><span class="pre">logfs_count()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#_CPPv49logfs_dirP5logfs14logfs_dir_cb_tPvK6size_t"><code class="docutils literal notranslate"><span class="pre">logfs_dir()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#_CPPv412logfs_deleteP5logfsK6time_t"><code class="docutils literal notranslate"><span class="pre">logfs_delete()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#_CPPv411logfs_clearP5logfs"><code class="docutils literal notranslate"><span class="pre">logfs_clear()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#_CPPv411logfs_flushP5logfs"><code class="docutils literal notranslate"><span class="pre">logfs_flush()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#_CPPv414logfs_dir_cb_t"><code class="docutils literal notranslate"><span class="pre">logfs_dir_cb_t</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#c.LOGFS_MIN_CACHE_SIZE"><code class="docutils literal notranslate"><span class="pre">LOGFS_MIN_CACHE_SIZE</span></code></a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025, Pazzk.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>